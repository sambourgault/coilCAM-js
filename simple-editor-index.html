<!DOCTYPE html>
<html>
<!-- SIMPLE EDITOR FOR HUGO DOCS -->

<head>
  <!-- REDIRECT TO simple-editor-index.html if URL param = simple -->
  <!-- simple editor is used to embed in hugo documentation -->
  <!-- Example URL params: index.html/?interface=simple&folder=tutorial-functions&example=functions_union-->
  <script type="module">
    (function() {
        const currentUrl = window.location.href;
        const url = new URL (currentUrl);
        const params = url.searchParams;
        var interfaceType = params.get('example');

        if (interfaceType === 'simple') { // keep other URL parameters but redirect to simple-editor-index
            params.delete('interface');
            const newUrl = new URL('/simple-editor-index.html', window.location.origin);
            newUrl.search = params.toString(); // add existing parameters to new URL
            window.location.href = newUrl.href;
        }
    })();
  </script>
</head>

<!-- LIBRARIES / IMPORTS -->
<!-- CoilCAM library (includes Flatten-js for union + difference + base functions) -->
<script src="https://unpkg.com/coilcam@latest/dist/module.js"></script>

<!-- Resizing windows (Split-js)-->
<script src="https://unpkg.com/split.js/dist/split.min.js"></script>

<!-- UI + updatePath functionality (for online editor) -->
<script type="module" src="interface.js"></script>

<!-- CodeMirror -->
<link rel="stylesheet" href="style-interface.css">
<script src="codemirror-5.65.13/lib/codemirror.js"></script>
<link rel="stylesheet" href="codemirror-5.65.13/lib/codemirror.css">
<script src="codemirror-5.65.13/mode/javascript/javascript.js"></script>
<script src = "codemirror-5.65.13/addon/hint/show-hint.js"></script>
<script src = "codemirror-5.65.13/addon/hint/javascript-hint.js"></script> 
<link rel="stylesheet" href = "codemirror-5.65.13/addon/hint/show-hint.css">

<body>
  <div class = "page" id="layout">
    <div class = "CC-header">
      <div class = "CC-header-buttons">
        <button type="button" id="b_run">run</button> 
        <button type="button" id="b_save">save</button> 
      </div>
    </div>

    <div class="split">
      <div class="cell split-editors">
        <div class="cell split-editor">
          <textarea id = "editor"></textarea>
        </div>
        <div class="cell split-console">
            <textarea id = "console"></textarea>
        </div> 
      </div>
      <div class="split-window">
        <!-- TODO: ToolpathViewer should be exported with the rest of the CoilCAM library -->
        <!-- For now, embed local file as iframe -->
        <iframe src="./toolpathViewer/ToolpathViewer.html" id="TPVcontainer" width="100%" height="100%"></iframe>
      </div>
    </div>
  </div>

  <script>
    Split(['.split-editors', '.split-window'], {
      sizes: [50, 50],
      maxSize: [Infinity, Infinity],
      minSize: 10,
      direction: 'horizontal',
      cursor: 'row-resize'
    });
    Split(['.split-editor', '.split-console'], {
      sizes: [70, 30],
      direction: 'vertical',
      cursor: 'col-resize'
    }
    );
  </script>
</body>
</html>
