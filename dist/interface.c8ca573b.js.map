{"version":3,"sources":["shaders/canvas-shaders.js","interface.js"],"names":["vertexShader3D","exports","fragmentShader3D","vertexShader2D","fragmentShader2D","_canvasShaders","require","_typeof","o","Symbol","iterator","constructor","prototype","_regeneratorRuntime","e","t","r","Object","n","hasOwnProperty","defineProperty","value","i","a","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","_catch","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","error","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","radToDeg","Math","PI","degToRad","getExampleVessel","_x","_getExampleVessel","_callee","file","response","data","_callee$","_context","fetch","ok","text","t0","console","path","referencePath","bedPath","bedDimensions","triangularizedPath","updatedPath","editingParameter","numEditPoints","initialTranslation","initialRotation","initialFieldOfView","updatePath","newPath","refPath","main","createShader","gl","source","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","deleteShader","createProgram","vertexShader","fragmentShader","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","deleteProgram","m4","perspective","fieldOfViewInRadians","aspect","near","far","tan","rangeInv","orthographic","left","right","bottom","top","projection","width","height","depth","multiply","b","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","translation","tx","ty","tz","xRotation","angleInRadians","cos","sin","yRotation","zRotation","scaling","sx","sy","sz","translate","m","xRotate","yRotate","zRotate","scale","inverse","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","tmp_0","tmp_1","tmp_2","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","t1","t2","t3","vectorMultiply","dst","j","addBedPath","bedXOffset","bedYOffset","addPrinterGuidelines","crossProduct","line1","line2","magnitude","sqrt","x","z","log","triangularize","trianglePath","thicknessP1","thicknessP2","setPath","parameterPath","concat","combinedPath","bufferData","ARRAY_BUFFER","Float32Array","STATIC_DRAW","setUpCodeMirror","textArea","textArea2","editorCodeMirror","consoleCodeMirror","document","getElementById","className","defaultPathToVessel","setValue","currentUrl","window","location","href","url","URL","params","searchParams","folder","get","vesselName","pathToVessel","printErrorToCodeMirror","errorString","replaceRange","CodeMirror","Pos","lastLine","fromTextArea","lineNumbers","mode","lineWrapping","onload","setOption","cm","lineNumber","getCursor","line","currentLine","getLine","startsWith","setSize","style","marginLeft","exampleVessels","_loop","buttonID","addEventListener","newText","runCode","codeToRun","getValue","eval","saveCode","textInEditor","blob","Blob","anchor","createElement","createObjectURL","download","click","newTab","target","changePrinterDims","printerType","addFileAsButton","filename","contents","newButton","textContent","classList","add","dataBlob","dataFile","File","dataUrl","open","trashButton","divName","split","localStorage","removeItem","parent","firstChild","removeChild","parentElement","id","appendChild","handleFiles","event","files","fileExtension","getItem","validExtensions","includes","reader","FileReader","result","onerror","readAsText","readAsDataURL","setItem","join","capture","dropbox","preventDefault","stopPropagation","remove","dataTransfer"],"mappings":"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","file":"interface.c8ca573b.js","sourceRoot":"..","sourcesContent":["export const vertexShader3D = `\n  attribute vec4 a_position;\n  attribute vec4 a_color;\n  \n  uniform mat4 u_matrix;\n  \n  varying vec4 v_color;\n  \n  void main() {\n    // Multiply the position by the matrix.\n    gl_Position = u_matrix * a_position;\n  \n    // Pass the color to the fragment shader.\n    v_color = a_color;\n  }`;\n\n\nexport const fragmentShader3D = `\n    precision mediump float;\n    \n    // Passed in from the vertex shader.\n    varying vec4 v_color;\n    uniform vec4 fColor;\n    \n    void main() {\n      gl_FragColor = fColor;\n    }\n`;\n\nexport const vertexShader2D = `\n\n  // an attribute will receive data from a buffer\n  attribute vec4 a_position;\n\n  // all shaders have a main function\n  void main() {\n\n    // gl_Position is a special variable a vertex shader\n    // is responsible for setting\n    gl_Position = a_position;\n  }`;\n\nexport const fragmentShader2D = `\n\n  // fragment shaders don't have a default precision so we need\n  // to pick one. mediump is a good default\n  precision mediump float;\n\n  void main() {\n    // gl_FragColor is a special variable a fragment shader\n    // is responsible for setting\n    gl_FragColor = vec4(0, 0.5, 0, 1); // return redish-purple\n  }`;","/* eslint no-console:0 consistent-return:0 */\r\n\"use strict\";\r\n\r\nimport { vertexShader3D, fragmentShader3D } from './shaders/canvas-shaders.js';\r\n// import { ToolpathViewer } from 'https://unpkg.com/coilcam@latest/dist/module.js';\r\n\r\nfunction radToDeg(r) {\r\n  return r * 180 / Math.PI;\r\n}\r\n\r\nfunction degToRad(d) {\r\n  return d * Math.PI / 180;\r\n}\r\n\r\nasync function getExampleVessel(file){\r\n  try{\r\n    var response = await fetch(file);\r\n    if(response.ok){\r\n      var data = await response.text();\r\n      return data;\r\n    } \r\n  } catch(error){\r\n    console.error('Error fetching file:', error);\r\n  }\r\n  return null;\r\n}\r\n\r\nlet path = []; //toolpath for vessel\r\nlet referencePath = []; //reference layer (optional)\r\nlet bedPath = []; //toolpath for bed\r\nvar bedDimensions = [280, 265, 305];\r\nlet triangularizedPath = [];\r\nlet updatedPath = true;\r\nlet editingParameter = false; //for editing toolpath\r\nlet numEditPoints = 0;\r\nlet initialTranslation = [0, -50, -700];\r\nvar initialRotation = [degToRad(-45), degToRad(0), degToRad(10)];\r\nvar initialFieldOfView = degToRad(40);\r\n\r\nfunction updatePath(newPath, refPath=[]){\r\n  updatedPath = true;\r\n  editingParameter = false;\r\n  path = newPath;\r\n  referencePath = refPath;\r\n  main(initialTranslation,initialRotation, initialFieldOfView);\r\n}\r\n\r\nfunction createShader(gl, type, source) {\r\n  var shader = gl.createShader(type);\r\n  gl.shaderSource(shader, source);\r\n  gl.compileShader(shader);\r\n  var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n  if (success) {\r\n    return shader;\r\n  }\r\n\r\n  gl.deleteShader(shader);\r\n}\r\n\r\nfunction createProgram(gl, vertexShader, fragmentShader) {\r\n  var program = gl.createProgram();\r\n  gl.attachShader(program, vertexShader);\r\n  gl.attachShader(program, fragmentShader);\r\n  gl.linkProgram(program);\r\n  var success = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n  if (success) {\r\n    return program;\r\n  }\r\n\r\n  gl.deleteProgram(program);\r\n}\r\n\r\n\r\nfunction main() {\r\n  \r\n  \r\n  // Get A WebGL context\r\n  \r\n  // var canvas = document.querySelector(\"#canvas\");\r\n  // var gl = canvas.getContext(\"webgl\", { depth: true });\r\n  // if (!gl) {\r\n  //   return;\r\n  // }\r\n  \r\n\r\n  // // from webgl tutorials\r\n  // // setup GLSL program\r\n  // // var program = webglUtils.createProgramFromScripts(gl, [\"vertex-shader-3d\", \"fragment-shader-3d\"]);\r\n  \r\n  // var vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexShader3D);\r\n  // var fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentShader3D);\r\n  // var program = createProgram(gl, vertexShader, fragmentShader);\r\n  // // look up where the vertex data needs to go.\r\n  // var positionLocation = gl.getAttribLocation(program, \"a_position\");\r\n\r\n  // //var colorLocation = gl.getAttribLocation(program, \"a_color\");\r\n\r\n  // // lookup uniforms\r\n  // var colorLocation = gl.getUniformLocation(program, \"u_color\");\r\n  // var matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\r\n\r\n  // // Create a buffer and put three 2d clip space points in it\r\n  // var positionBuffer = gl.createBuffer();\r\n\r\n  // // Bind it to ARRAY_BUFFER (think of it as ARRAY_BUFFER = positionBuffer)\r\n  // gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n\r\n  // // Put geometry data into buffer\r\n  // //setGeometry(gl);\r\n  // setPath(gl, path, referencePath);\r\n\r\n  // var cameraAngleRadians = degToRad(0);\r\n  // var fieldOfViewRadians = initialFieldOfView;\r\n  // // var fieldOfViewRadians = degToRad(30);\r\n  // var translation = initialTranslation;\r\n  // var rotation = initialRotation;\r\n  // var scale = [1, 1, 1];\r\n  // var color = [Math.random(), Math.random(), Math.random(), 1];\r\n\r\n  // drawScene();\r\n  \r\n  // if (updatedPath){\r\n  //   drawScene();\r\n  //   updatedPath = false;\r\n  // }\r\n\r\n  // //drag canvas\r\n  // let isDragging = false;\r\n  // let lastX, lastY, lastZ;\r\n\r\n  // canvas.addEventListener('mousedown', (event) => {\r\n  //   isDragging = true;\r\n  //   lastX = event.clientX;\r\n  //   lastY = event.clientY;\r\n  //   lastZ = event.clientZ;\r\n    \r\n  // });\r\n\r\n  // //prevent warping in the split window when window resized\r\n  // window.addEventListener(\"resize\", (event) => { \r\n  //   drawScene();\r\n  // });\r\n  // const canvasResizeObserver = new ResizeObserver((entries) => {\r\n  //   for (let entry of entries){\r\n  //     drawScene();\r\n  //   }\r\n  // });\r\n  // canvasResizeObserver.observe(document.getElementById(\"canvas\"));\r\n  \r\n  // canvas.addEventListener(\"contextmenu\", (event) => { //right click\r\n  //   if (isDragging) {\r\n  //     let deltaX = event.clientX - lastX;\r\n  //     let deltaY = event.clientY - lastY;\r\n  //     translation[0] += deltaX;\r\n  //     translation[1] -= deltaY;\r\n  //     initialTranslation = translation;\r\n  //     drawScene();\r\n  //     lastX = event.clientX;\r\n  //     lastY = event.clientY;\r\n  //   }\r\n  // });\r\n\r\n  // canvas.addEventListener('mousemove', (event) => {\r\n  //   if (isDragging) {\r\n  //     let deltaX = event.clientX - lastX;\r\n  //     let deltaY = event.clientY - lastY;\r\n  //     if (event.shiftKey) { //shift key, move model\r\n  //       translation[0] += deltaX;\r\n  //       translation[1] -= deltaY;\r\n  //       initialTranslation = translation;\r\n  //     } else{ //rotate model\r\n  //       let factor = 1/100; // Rotation sensitivity\r\n  //       rotation[0] += deltaY * factor;\r\n  //       rotation[2] += deltaX * factor;\r\n  //       initialRotation = rotation;\r\n  //     }\r\n\r\n  //     drawScene();\r\n  //     lastX = event.clientX;\r\n  //     lastY = event.clientY;\r\n  //   }\r\n  // });\r\n\r\n  // canvas.addEventListener(\"wheel\", (event) => { //zoom\r\n  //   const zoomSpeed = 0.03;\r\n  //   if (event.deltaY < 0) {\r\n  //     fieldOfViewRadians -= zoomSpeed;\r\n  //   } else { \r\n  //     fieldOfViewRadians += zoomSpeed;\r\n  //   }\r\n  //   initialFieldOfView = fieldOfViewRadians;\r\n  //   drawScene();\r\n  // });\r\n\r\n  // canvas.addEventListener('mouseup', () => {\r\n  //   isDragging = false;\r\n  // });\r\n\r\n  // canvas.addEventListener('mouseleave', () => {\r\n  //   isDragging = false;\r\n  // });\r\n\r\n  // // Draw the scene.\r\n  // function drawScene() {\r\n  //   webglUtils.resizeCanvasToDisplaySize(gl.canvas);\r\n\r\n  //   // Tell WebGL how to convert from clip space to pixels\r\n  //   gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n\r\n  //   // Clear the canvas AND the depth buffer.\r\n  //   gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n  //   // disable culling so that the base is double-sided\r\n  //   // gl.enable(gl.CULL_FACE);\r\n\r\n  //   // Enable the depth buffer\r\n  //   gl.enable(gl.DEPTH_TEST);\r\n\r\n  //   // Tell it to use our program (pair of shaders)\r\n  //   gl.useProgram(program);\r\n\r\n  //   // Turn on the position attribute\r\n  //   gl.enableVertexAttribArray(positionLocation);\r\n\r\n  //   // Bind the position buffer.\r\n  //   gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n\r\n  //   // Tell the position attribute how to get data out of positionBuffer (ARRAY_BUFFER)\r\n  //   var size = 3;          // 3 components per iteration\r\n  //   var type = gl.FLOAT;   // the data is 32bit floats\r\n  //   var normalize = false; // don't normalize the data\r\n  //   var stride = 0;        // 0 = move forward size * sizeof(type) each iteration to get the next position\r\n  //   var offset = 0;        // start at the beginning of the buffer\r\n  //   gl.vertexAttribPointer(\r\n  //       positionLocation, size, type, normalize, stride, offset);\r\n   \r\n  //   // Compute the matrices\r\n  //   // var matrix = m4.projection(gl.canvas.clientWidth, gl.canvas.clientHeight, 400);\r\n  //   var left = 0;\r\n  //   var right = gl.canvas.clientWidth;\r\n  //   var bottom = gl.canvas.clientHeight;\r\n  //   var top = 0;\r\n  //   var near = 500;\r\n  //   var far = 0;\r\n  //   // perspective: function(fieldOfViewInRadians, aspect, near, far)\r\n  //   var matrix = m4.perspective(fieldOfViewRadians, gl.canvas.clientWidth / gl.canvas.clientHeight, near, far);\r\n  //   matrix = m4.translate(matrix, translation[0], translation[1], translation[2]);\r\n  //   matrix = m4.xRotate(matrix, rotation[0]);\r\n  //   matrix = m4.yRotate(matrix, rotation[1]);\r\n  //   matrix = m4.zRotate(matrix, rotation[2]);\r\n  //   matrix = m4.scale(matrix, scale[0], scale[1], scale[2]);\r\n\r\n  //   // Set the matrix.\r\n  //   gl.uniformMatrix4fv(matrixLocation, false, matrix);\r\n\r\n  //   // Set the color/vars.\r\n  //   var fColorLocation = gl.getUniformLocation(program, \"fColor\");\r\n  //   var primitiveType = gl.LINE_STRIP;\r\n  //   var offset = 22;\r\n\r\n    \r\n  //   // vessel\r\n  //   gl.uniform4f(fColorLocation, 0.0, 0.0, 0.0, 1.0); // Set toolpath color to black\r\n  //   if(path.length > 0){\r\n  //     if(editingParameter){\r\n  //       gl.drawArrays(gl.QUADS,path.length*1.5 - offset - (numEditPoints*editingParameter));\r\n  //     }\r\n  //     gl.drawArrays(gl.TRIANGLES, offset + referencePath.length*1.5, path.length*1.5 - offset - (numEditPoints*editingParameter));\r\n  //   }\r\n\r\n  //   // reference path\r\n  //   gl.uniform4f(fColorLocation, 0.5, 0.6, 1.0, 1.0); // Set reference layer as light blue\r\n  //   gl.drawArrays(gl.TRIANGLES, offset, referencePath.length*1.5);\r\n  \r\n  //   // // Draw the guidelines.\r\n  //   gl.uniform4f(fColorLocation, 0.9, 0.9, 0.9, 1.0); // Set bed lines as light gray\r\n  //   gl.drawArrays(gl.LINES, 6, 16); //next 16 vertices will be drawn as lines (base)\r\n\r\n  //   // Draw the base.\r\n  //   gl.uniform4f(fColorLocation, 0.7, 0.7, 0.7, 1.0); // Set bed color as gray\r\n  //   gl.drawArrays(gl.TRIANGLES, 0, 6); //first 6 vertices will be drawn as triangles (base)\r\n  // }\r\n}\r\n\r\nvar m4 = {\r\n  perspective: function(fieldOfViewInRadians, aspect, near, far) {\r\n    var f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewInRadians);\r\n    var rangeInv = 1.0 / (near - far);\r\n\r\n    return [\r\n      f / aspect, 0, 0, 0,\r\n      0, f, 0, 0,\r\n      0, 0, (near + far) * rangeInv, -1,\r\n      0, 0, near * far * rangeInv * 2, 0\r\n    ];\r\n  },\r\n\r\n\r\n  orthographic: function(left, right, bottom, top, near, far) {\r\n    return [\r\n      2 / (right - left), 0, 0, 0,\r\n      0, 2 / (top - bottom), 0, 0,\r\n      0, 0, 2 / (near - far), 0,\r\n      (left + right) / (left - right),\r\n      (bottom + top) / (bottom - top),\r\n      (near + far) / (near - far),\r\n      1,\r\n    ];\r\n  },\r\n\r\n  projection: function(width, height, depth) {\r\n    // Note: This matrix flips the Y axis so 0 is at the top.\r\n    return [\r\n       2 / width, 0, 0, 0,\r\n       0, -2 / height, 0, 0,\r\n       0, 0, 2 / depth, 0,\r\n      -1, 1, 0, 1,\r\n    ];\r\n  },\r\n\r\n  multiply: function(a, b) {\r\n    var a00 = a[0 * 4 + 0];\r\n    var a01 = a[0 * 4 + 1];\r\n    var a02 = a[0 * 4 + 2];\r\n    var a03 = a[0 * 4 + 3];\r\n    var a10 = a[1 * 4 + 0];\r\n    var a11 = a[1 * 4 + 1];\r\n    var a12 = a[1 * 4 + 2];\r\n    var a13 = a[1 * 4 + 3];\r\n    var a20 = a[2 * 4 + 0];\r\n    var a21 = a[2 * 4 + 1];\r\n    var a22 = a[2 * 4 + 2];\r\n    var a23 = a[2 * 4 + 3];\r\n    var a30 = a[3 * 4 + 0];\r\n    var a31 = a[3 * 4 + 1];\r\n    var a32 = a[3 * 4 + 2];\r\n    var a33 = a[3 * 4 + 3];\r\n    var b00 = b[0 * 4 + 0];\r\n    var b01 = b[0 * 4 + 1];\r\n    var b02 = b[0 * 4 + 2];\r\n    var b03 = b[0 * 4 + 3];\r\n    var b10 = b[1 * 4 + 0];\r\n    var b11 = b[1 * 4 + 1];\r\n    var b12 = b[1 * 4 + 2];\r\n    var b13 = b[1 * 4 + 3];\r\n    var b20 = b[2 * 4 + 0];\r\n    var b21 = b[2 * 4 + 1];\r\n    var b22 = b[2 * 4 + 2];\r\n    var b23 = b[2 * 4 + 3];\r\n    var b30 = b[3 * 4 + 0];\r\n    var b31 = b[3 * 4 + 1];\r\n    var b32 = b[3 * 4 + 2];\r\n    var b33 = b[3 * 4 + 3];\r\n    return [\r\n      b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,\r\n      b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,\r\n      b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,\r\n      b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,\r\n      b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,\r\n      b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,\r\n      b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,\r\n      b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,\r\n      b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,\r\n      b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,\r\n      b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,\r\n      b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,\r\n      b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,\r\n      b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,\r\n      b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,\r\n      b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33,\r\n    ];\r\n  },\r\n\r\n  translation: function(tx, ty, tz) {\r\n    return [\r\n       1,  0,  0,  0,\r\n       0,  1,  0,  0,\r\n       0,  0,  1,  0,\r\n       tx, ty, tz, 1,\r\n    ];\r\n  },\r\n\r\n  xRotation: function(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [\r\n      1, 0, 0, 0,\r\n      0, c, s, 0,\r\n      0, -s, c, 0,\r\n      0, 0, 0, 1,\r\n    ];\r\n  },\r\n\r\n  yRotation: function(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [\r\n      c, 0, -s, 0,\r\n      0, 1, 0, 0,\r\n      s, 0, c, 0,\r\n      0, 0, 0, 1,\r\n    ];\r\n  },\r\n\r\n  zRotation: function(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [\r\n       c, s, 0, 0,\r\n      -s, c, 0, 0,\r\n       0, 0, 1, 0,\r\n       0, 0, 0, 1,\r\n    ];\r\n  },\r\n\r\n  scaling: function(sx, sy, sz) {\r\n    return [\r\n      sx, 0,  0,  0,\r\n      0, sy,  0,  0,\r\n      0,  0, sz,  0,\r\n      0,  0,  0,  1,\r\n    ];\r\n  },\r\n\r\n  translate: function(m, tx, ty, tz) {\r\n    return m4.multiply(m, m4.translation(tx, ty, tz));\r\n  },\r\n\r\n  xRotate: function(m, angleInRadians) {\r\n    return m4.multiply(m, m4.xRotation(angleInRadians));\r\n  },\r\n\r\n  yRotate: function(m, angleInRadians) {\r\n    return m4.multiply(m, m4.yRotation(angleInRadians));\r\n  },\r\n\r\n  zRotate: function(m, angleInRadians) {\r\n    return m4.multiply(m, m4.zRotation(angleInRadians));\r\n  },\r\n\r\n  scale: function(m, sx, sy, sz) {\r\n    return m4.multiply(m, m4.scaling(sx, sy, sz));\r\n  },\r\n\r\n  inverse: function(m) {\r\n    var m00 = m[0 * 4 + 0];\r\n    var m01 = m[0 * 4 + 1];\r\n    var m02 = m[0 * 4 + 2];\r\n    var m03 = m[0 * 4 + 3];\r\n    var m10 = m[1 * 4 + 0];\r\n    var m11 = m[1 * 4 + 1];\r\n    var m12 = m[1 * 4 + 2];\r\n    var m13 = m[1 * 4 + 3];\r\n    var m20 = m[2 * 4 + 0];\r\n    var m21 = m[2 * 4 + 1];\r\n    var m22 = m[2 * 4 + 2];\r\n    var m23 = m[2 * 4 + 3];\r\n    var m30 = m[3 * 4 + 0];\r\n    var m31 = m[3 * 4 + 1];\r\n    var m32 = m[3 * 4 + 2];\r\n    var m33 = m[3 * 4 + 3];\r\n    var tmp_0  = m22 * m33;\r\n    var tmp_1  = m32 * m23;\r\n    var tmp_2  = m12 * m33;\r\n    var tmp_3  = m32 * m13;\r\n    var tmp_4  = m12 * m23;\r\n    var tmp_5  = m22 * m13;\r\n    var tmp_6  = m02 * m33;\r\n    var tmp_7  = m32 * m03;\r\n    var tmp_8  = m02 * m23;\r\n    var tmp_9  = m22 * m03;\r\n    var tmp_10 = m02 * m13;\r\n    var tmp_11 = m12 * m03;\r\n    var tmp_12 = m20 * m31;\r\n    var tmp_13 = m30 * m21;\r\n    var tmp_14 = m10 * m31;\r\n    var tmp_15 = m30 * m11;\r\n    var tmp_16 = m10 * m21;\r\n    var tmp_17 = m20 * m11;\r\n    var tmp_18 = m00 * m31;\r\n    var tmp_19 = m30 * m01;\r\n    var tmp_20 = m00 * m21;\r\n    var tmp_21 = m20 * m01;\r\n    var tmp_22 = m00 * m11;\r\n    var tmp_23 = m10 * m01;\r\n\r\n    var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\r\n        (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\r\n    var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\r\n        (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\r\n    var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\r\n        (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\r\n    var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\r\n        (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\r\n\r\n    var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\r\n\r\n    return [\r\n      d * t0,\r\n      d * t1,\r\n      d * t2,\r\n      d * t3,\r\n      d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\r\n            (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30)),\r\n      d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\r\n            (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30)),\r\n      d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\r\n            (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30)),\r\n      d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\r\n            (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20)),\r\n      d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\r\n            (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33)),\r\n      d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\r\n            (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33)),\r\n      d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\r\n            (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33)),\r\n      d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\r\n            (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23)),\r\n      d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\r\n            (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22)),\r\n      d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\r\n            (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02)),\r\n      d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\r\n            (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12)),\r\n      d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\r\n            (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02))\r\n    ];\r\n  },\r\n\r\n  vectorMultiply: function(v, m) {\r\n    var dst = [];\r\n    for (var i = 0; i < 4; ++i) {\r\n      dst[i] = 0.0;\r\n      for (var j = 0; j < 4; ++j) {\r\n        dst[i] += v[j] * m[j * 4 + i];\r\n      }\r\n    }\r\n    return dst;\r\n  },\r\n\r\n};\r\n\r\n\r\nfunction addBedPath(){\r\n  let bedXOffset = bedDimensions[0]/2\r\n  let bedYOffset = bedDimensions[1]/2;\r\n\r\n  let base_vertices = [\r\n    bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, -0.2,\r\n    -bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, -0.2,\r\n    bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, -0.2,\r\n    -bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, -0.2,\r\n    bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, -0.2,\r\n    -bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, -0.2 \r\n  ] //2 triangles, 6 points total\r\n  return base_vertices;\r\n}\r\n\r\nfunction addPrinterGuidelines(){\r\n  let bedXOffset = bedDimensions[0]/2\r\n  let bedYOffset = bedDimensions[1]/2;\r\n  let bedZoffset = -0.2;\r\n  let printer_guidelines = [\r\n    bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, bedZoffset,\r\n    bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n\r\n    -bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, bedZoffset,\r\n    -bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n\r\n    -bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, bedZoffset,\r\n    -bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n\r\n    bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, bedZoffset,\r\n    bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n\r\n    \r\n    bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n    -bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n\r\n    -bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n    -bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n\r\n    -bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n    bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n\r\n    bedDimensions[0]*.5 + bedXOffset, -bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n    bedDimensions[0]*.5 + bedXOffset, bedDimensions[1]*.5 + bedYOffset, bedZoffset + bedDimensions[2],\r\n\r\n  ] //16 points total\r\n  return printer_guidelines;\r\n}\r\n\r\nfunction crossProduct(line1, line2){\r\n  var magnitude = Math.sqrt(x * x + y * y + z * z);\r\n  var x = (line1[1] * line2[2] - line1[2] * line2[1]);\r\n  var y = (line1[2] * line2[0] - line1[0] * line2[2]);\r\n  var z = (line1[0] * line2[1] - line1[1] * line2[0]);\r\n  console.log(x, y, z);\r\n  console.log(magnitude);\r\n  return [x, y, z];\r\n}\r\n\r\nfunction triangularize(path){\r\n  let trianglePath = [];\r\n  for(let i = 0; i < path.length-4;i+=4){\r\n    //vertical triangles\r\n    let thicknessP1 = .5 + path[i+3];\r\n    let thicknessP2 = .5 + path[i+7];\r\n\r\n    let p1 = [path[i], path[i+1], path[i+2]];\r\n    let p2 = [path[i+4], path[i+5], path[i+6]];\r\n\r\n    trianglePath.push(path[i], path[i+1], path[i+2]+thicknessP1);\r\n    trianglePath.push(path[i], path[i+1], path[i+2]-thicknessP1);\r\n    trianglePath.push(path[i+4], path[i+5], path[i+6]-thicknessP2);\r\n\r\n    trianglePath.push(path[i+4], path[i+5], path[i+6]+thicknessP2);\r\n    trianglePath.push(path[i+4], path[i+5], path[i+6]-thicknessP2);\r\n    trianglePath.push(path[i], path[i+1], path[i+2]+thicknessP1);\r\n  }\r\n  return trianglePath;\r\n}\r\n\r\n// function addEditPoints(parameterPath){ //diamond shape\r\n//   let points = [];\r\n//   let thickness = 3;\r\n//   for(let i = 0; i < parameterPath.length; i+=4){\r\n//     points.push(parameterPath[i], parameterPath[i+1], path[i+2]-thickness);\r\n//     points.push(parameterPath[i]+thickness, parameterPath[i+1], path[i+2]);\r\n//     points.push(parameterPath[i], parameterPath[i+1], path[i+2]+thickness);\r\n//     points.push(parameterPath[i], parameterPath[i+1], path[i+2]-thickness);\r\n//     points.push(parameterPath[i]-thickness, parameterPath[i+1], path[i+2]);\r\n//     points.push(parameterPath[i], parameterPath[i+1], path[i+2]+thickness);\r\n//   }\r\n//   numEditPoints = points.length;\r\n//   return points;\r\n// }\r\n\r\nfunction setPath(gl, path, referencePath, parameterPath) {\r\n  bedPath = addBedPath(bedDimensions).concat(addPrinterGuidelines(bedDimensions)); //16 extra points\r\n  let combinedPath = [];\r\n  if(referencePath.length != 0){\r\n    combinedPath = bedPath.concat(triangularize(referencePath)).concat(triangularize(path));\r\n  } else{\r\n    combinedPath = bedPath.concat(triangularize(path));\r\n  }\r\n  // if(editingParameter){ //display points that can be grabbed/edited\r\n  //   combinedPath = combinedPath.concat(addEditPoints(parameterPath));\r\n  // }\r\n  \r\n  gl.bufferData(\r\n    gl.ARRAY_BUFFER,\r\n    new Float32Array(combinedPath),\r\n    gl.STATIC_DRAW);\r\n}\r\n\r\nfunction setUpCodeMirror(){\r\n  let textArea, textArea2;\r\n  let editorCodeMirror;\r\n  let consoleCodeMirror;\r\n\r\n  // code editor: https://www.youtube.com/watch?v=C3fNuqQeUdY&t=1004s\r\n  //code editor\r\n  textArea = document.getElementById(\"editor\");\r\n  textArea.className = 'codemirror_textarea';\r\n\r\n  // set default codemirror text content\r\n  var defaultPathToVessel = 'examples/DefaultVessel.js';\r\n  getExampleVessel(defaultPathToVessel) \r\n  .then(text => {editorCodeMirror.setValue(text)});\r\n  \r\n  // Check URL parameters for example vessel to load in\r\n  // since there are no buttons in the simple viewer\r\n  const currentUrl = window.location.href;\r\n  const url = new URL (currentUrl);\r\n  const params = url.searchParams;\r\n  console.log(\"params\", params);\r\n  var folder = params.get('folder'); //specifies folder\r\n  var vesselName = params.get('example'); //specifies name of file \r\n\r\n  if(vesselName !== null){\r\n    if(folder == null){ folder = \"\"; }\r\n    var pathToVessel = \"examples/\" + folder+'/'+vesselName+'.js'; //from URL parameters\r\n    getExampleVessel(pathToVessel).then(text => {\r\n      if(text !== null){\r\n        editorCodeMirror.setValue(text)\r\n      }\r\n    });\r\n  }\r\n\r\n  editorCodeMirror = CodeMirror.fromTextArea(textArea, {\r\n    lineNumbers: true,\r\n    mode: 'javascript',\r\n    lineWrapping: true,\r\n  }); \r\n  window.onload = function() { //shortcut to comment out line\r\n    editorCodeMirror.setOption(\"extraKeys\", {\"Cmd-/\":function(cm) {\r\n      let cursor = cm.getCursor();\r\n      let lineNumber = cursor.line;\r\n      let currentLine = cm.getLine(lineNumber);\r\n      if(currentLine.startsWith(\"//\")){\r\n        editorCodeMirror.replaceRange(currentLine.slice(2), CodeMirror.Pos(lineNumber, 0), CodeMirror.Pos(lineNumber), 0);\r\n      } else{\r\n        editorCodeMirror.replaceRange(\"//\"+currentLine, CodeMirror.Pos(lineNumber, 0), CodeMirror.Pos(lineNumber), 0);\r\n      }\r\n    }},);}\r\n\r\n  editorCodeMirror.setSize(\"100%\", \"100%\");\r\n  \r\n  // code editor console\r\n  textArea2 = document.getElementById(\"console\");\r\n  textArea2.className = 'codemirror_textarea';\r\n  textArea2.style.marginLeft = 20+'px';\r\n  textArea2.style.width = 140+'%';\r\n  textArea2.style.height = 200+'px';\r\n\r\n  // configs\r\n  consoleCodeMirror = CodeMirror.fromTextArea(textArea2, {\r\n    lineNumbers: true,\r\n    mode: 'javascript',\r\n    lineWrapping: true,\r\n    \r\n    //extraKeys: {\"Ctrl-Space\":\"autocomplete\"}\r\n  });\r\n  consoleCodeMirror.setSize(\"100%\", \"100%\");\r\n\r\n  function printErrorToCodeMirror(errorString){\r\n    consoleCodeMirror.replaceRange(`$ `+(errorString)+\"\\n\", CodeMirror.Pos(consoleCodeMirror.lastLine()));\r\n  }\r\n  \r\n  //dropdown menu\r\n  const exampleVessels={ //add examples here\r\n    \"example-cup\":[\"examples/BooleanUnionCup.js\"], \r\n    \"example-vase\":[\"examples/SimpleVase.js\"], \r\n    \"example-plate\":[\"examples/BooleanUnionDish.js\"]\r\n  };\r\n\r\n  for (let buttonID in exampleVessels){\r\n    (function () {\r\n    document.getElementById(buttonID).addEventListener(\"click\", function() {\r\n        let newText = getExampleVessel(exampleVessels[buttonID])\r\n          .then(text => {editorCodeMirror.setValue(text)});\r\n        editorCodeMirror.setValue(getExampleVessel(newText));\r\n      },);\r\n    }());\r\n  }\r\n  \r\n\r\n  document.getElementById('b_upload').addEventListener('click', function() {\r\n    document.getElementById('file_input').click(); //won't trigger when page loads\r\n  }, {capture: true});\r\n  \r\n  //changes codemirror editor based on uploaded file\r\n  document.getElementById('file_input').addEventListener('change', function(event) { \r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      const fileExtension = file.name.split('.').pop();\r\n      if (fileExtension === 'txt') {\r\n        const reader = new FileReader();\r\n        reader.onload = function(e) {\r\n          const contents = e.target.result;\r\n          editorCodeMirror.setValue(contents);\r\n        };\r\n        \r\n        reader.onerror = function(e) {\r\n          console.error('Error reading file:', e);\r\n        };\r\n        \r\n        reader.readAsText(file);\r\n      } else{\r\n        consoleCodeMirror.replaceRange(`$ `+(`${\"File name must end with .txt\"}`)+\"\\n\", CodeMirror.Pos(consoleCodeMirror.lastLine()));\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n  \r\n\r\n\r\n\r\n  document.getElementById(\"b_run\").addEventListener(\"click\", runCode);\r\n  function runCode() {\r\n    console.log('run');\r\n    const codeToRun = editorCodeMirror.getValue();\r\n    try {\r\n      consoleCodeMirror.replaceRange(`$ `+eval(`${codeToRun}`)+\"\\n\", CodeMirror.Pos(consoleCodeMirror.lastLine()));\r\n    }\r\n    catch(err){\r\n      consoleCodeMirror.replaceRange(`$ `+err+\"\\n\", CodeMirror.Pos(consoleCodeMirror.lastLine()));\r\n    }\r\n  }\r\n\r\n  document.getElementById(\"b_save\").addEventListener(\"click\", saveCode, {capture: true});\r\n  function saveCode(){\r\n    let textInEditor = editorCodeMirror.getValue();\r\n    var blob = new Blob([textInEditor], {type: \"text/plain\"});\r\n    var anchor = document.createElement(\"a\");\r\n    anchor.href = URL.createObjectURL(blob);\r\n    anchor.download = \"coilCAM-js.txt\";\r\n    anchor.click();\r\n  }\r\n\r\n  document.getElementById(\"b_docs\").addEventListener(\"click\", newTab, {capture: true});\r\n  function newTab(){\r\n    let newTab = document.createElement('a');\r\n    newTab.href = \"https://github.com/sambourgault/coilCAM-docs\";\r\n    newTab.target = \"_blank\";\r\n    newTab.click();\r\n  }\r\n\r\n  document.getElementById(\"baby_pb\").addEventListener(\"click\", function(){changePrinterDims(\"baby\")});\r\n  document.getElementById(\"super_pb\").addEventListener(\"click\", function(){changePrinterDims(\"super\")});\r\n  \r\n  function changePrinterDims(printerType){\r\n    if (printerType == \"baby\"){\r\n      bedDimensions = [280, 265, 305];\r\n      main(initialTranslation,initialRotation, initialFieldOfView);\r\n    }\r\n    if (printerType == \"super\"){\r\n      bedDimensions = [415, 405, 500];\r\n      main(initialTranslation,initialRotation, initialFieldOfView);\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  //Upload data\r\n  document.getElementById('b_upload_files').addEventListener('click', function(){\r\n    document.getElementById('upload_data').click();\r\n  }, {capture: true});\r\n  document.getElementById('upload_data').addEventListener('change', handleFiles);\r\n\r\n  function addFileAsButton(filename, contents){ //add file to lefthand toolbar\r\n    //add new button to dropbox area\r\n    const newButton = document.createElement('uploaded_file_button');\r\n    newButton.textContent = filename;\r\n    newButton.classList.add('dynamic-button');\r\n\r\n    //TOFIX: event listener to display file in new window on click\r\n    newButton.addEventListener('click', function() {\r\n      const dataBlob = new Blob([contents], { type: 'text/plain' });\r\n      var dataFile = new File([dataBlob], filename, {type: \"text/plain\"});\r\n      const dataUrl = URL.createObjectURL(dataFile);\r\n      window.open(dataUrl);\r\n    });\r\n    \r\n    \r\n    //add trash button to new button to throw out unnecessary files\r\n    const trashButton = document.createElement('trashButton');\r\n    trashButton.textContent = '\\u{2612}';\r\n    trashButton.classList.add('trash-button');\r\n\r\n    \r\n    //event listener to remove file from localstorage\r\n    let divName = 'uploaded-file-div_'+filename.split('.')[0]+filename.split('.')[1];\r\n    trashButton.addEventListener('click', function() {\r\n      console.log(\"throw out file\", filename);\r\n      localStorage.removeItem(filename);\r\n      parent = document.getElementById(divName);\r\n      while (parent.firstChild) {\r\n        parent.removeChild(parent.firstChild);\r\n      }\r\n      document.getElementById('dropbox').removeChild(parent);\r\n    });\r\n\r\n    let parentElement = document.createElement('div');\r\n    parentElement.id = divName;\r\n    parentElement.className = 'uploaded-file-div';\r\n    parentElement.classList.add('div');\r\n    document.getElementById('dropbox').appendChild(parentElement);\r\n    \r\n    document.getElementById(divName).appendChild(trashButton);\r\n    document.getElementById(divName).appendChild(newButton);\r\n  }\r\n\r\n  function handleFiles(event){ //adds file to sidebar\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      var fileExtension = file.name.split('.').pop();\r\n      if(localStorage.getItem(file.name) === null){ //file has unique name\r\n        console.log(\"extension\", fileExtension);\r\n        let validExtensions = ['txt', 'wav', 'json', 'csv', 'mp3', 'mid']; //arbitrary, can be expanded\r\n        if (validExtensions.includes(fileExtension)) { \r\n          var contents;\r\n          const reader = new FileReader();\r\n          reader.onload = function(e) {\r\n            contents = e.target.result;\r\n          };\r\n          \r\n          reader.onerror = function(e) {\r\n            console.error('Error reading file:', e);\r\n          };\r\n\r\n          if(fileExtension == 'txt' || fileExtension == 'csv' || fileExtension == 'json' ){\r\n            reader.readAsText(file); //keep original contents\r\n          } else if(fileExtension == 'wav' || fileExtension == 'mp3'|| fileExtension == 'mid'){ //store as base64\r\n            reader.readAsDataURL(file);\r\n          }\r\n          reader.onload = function () {\r\n              contents = (reader.result);\r\n            try{\r\n              localStorage.setItem(file.name, contents);\r\n              addFileAsButton(file.name, contents);\r\n            }catch(err){\r\n              if(err.name === \"QuotaExceededError\"){\r\n                printErrorToCodeMirror(\"File exceeds size limits.\");\r\n              }\r\n            }\r\n          };\r\n        }\r\n        else{\r\n          printErrorToCodeMirror(\"File name must end with: \"+validExtensions.join(\" \"));\r\n        }\r\n      }\r\n      else{\r\n        printErrorToCodeMirror(\"The file \"+file.name+\" already exists in localStorage.\");\r\n      }\r\n    } else{\r\n      printErrorToCodeMirror(\"Error uploading file.\"); \r\n    }\r\n    \r\n  }\r\n  \r\n\r\n  //drag + drop functionality\r\n  let dropbox = document.getElementById(\"dropbox\");\r\n  dropbox.addEventListener('dragover', function(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dropbox.classList.add('dragging');\r\n  });\r\n  dropbox.addEventListener('dragleave', function(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dropbox.classList.remove('dragging');\r\n  });\r\n  dropbox.addEventListener(\"dragenter\", function(e){\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  });\r\n  dropbox.addEventListener(\"drop\", function(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    const dt = e.dataTransfer;\r\n    const files = dt.files;\r\n    dropbox.classList.remove('dragging');\r\n    handleFiles({ target: { files: files } });\r\n  });\r\n\r\n  //load all files from localstorage on page load\r\n  document.addEventListener('DOMContentLoaded', function(e){\r\n    console.log(\"localstorage files\");\r\n    for(let i = 0; i < localStorage.length; i++) {\r\n      addFileAsButton(localStorage.key(i), localStorage.getItem(localStorage.key(i)));\r\n    }\r\n  })\r\n  \r\n\r\n}\r\n\r\nmain();\r\nsetUpCodeMirror();\r\n"]}